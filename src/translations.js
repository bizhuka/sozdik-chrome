export const translations = {
    //'Lang': ['Қазақша', 'Русский'],
    'Light': ['Ақшыл', 'Светлая'],
    'Dark': ['Қара', 'Темная'],
    'Latin': ['Латынша', 'Латинница'],
    'Cyrillic': ['Кириллица', 'Кириллица'],
    'Morphology': ['Морфологиялық талдау жасау', 'Морфологический разбор'],
    'Translate': ['Аудару', 'Перевод'],
    'Do Translate': [
        'Орысшадан қазақшаға немесе қазақшадан орысшаға аудар.',
        'Переведи с русского на казахский или с казахского на русский.'
    ],
    'Calque': ['Кальканы анықтау', 'Обнаружение калек'],
    'Do Calque': [
        'Калькаларды анықтап, дұрыс лингвистикалық нұсқаларды ұсын.',
        'Найди кальки и предложи правильные лингвистические варианты.'
    ],
    'Calque Tooltip': [
        'Калькаларды анықтау функциясы қате лингвистикалық құрылымдарды анықтауға және аударманың дұрыс нұсқаларын ұсынуға көмектеседі.',
        'Функция обнаружения калек помогает выявить неправильные лингвистические конструкции и предлагает более корректные варианты перевода.'
    ],
    'Text': ['Мәтін', 'Текст'],
    'History Limit': ['Жүктелген сөздер лимиті', 'Лимит слов на скачивание'],
    'Request Delay (ms)': ['Кідіріс ұзақтығы (мс)', 'Задержка запроса (мс)'],
    'Sozdik.kz About': ['Sozdik.kz', 'Sozdik.kz'],
    'Plugin About': ['Қосымша туралы', 'О расширении'],
    'Delete all': ['Барлығын жою', 'Удалить все'],
    'History': ['Іздеу журналы', 'История поиска'],
    'Cancel': ['Болдырмау', 'Отменить'],
    'Confirm': ['Растау', 'Подтвердить'],
    'Are you sure you want to clear search history?': ['Сіз іздеу журналын тазартуға сенімдісіз бе?', 'Вы уверены, что хотите очистить историю поиска?'],
    'Confirm Deletion': ['Іздеу журналын тазарту', 'Очистка истории поиска'],
    'No search history found': ['Іздеу журналы табылмады', 'История поиска не найдена'],
    'Anki': ['Anki', 'Anki'],
    'Anki Deck': ['Anki колодасы', 'Колода Anki'],
    'Anki Note Type': ['Anki жазба түрі', 'Тип заметки Anki'],
    'No cards were exported. Make sure your history contains items with translations.': ['Сөздер экспортталмады. Журналыңызда аудармасы бар элементтер бар екеніне көз жеткізіңіз.', 'Карты не были экспортированы. Убедитесь, что ваша история содержит элементы с переводами.'],
    'Exporting to Anki...': ['Anki-ге экспорттау...', 'Экспорт в Anki...'],
    'Successfully exported {0} cards to Anki': ['Anki-ге {0} сөз сәтті экспортталды', 'Успешно экспортировано {0} карт в Anki'],
    'Successfully exported {0} cards to Anki ({1} duplicates skipped)': ['Anki-ге {0} сөз сәтті экспортталды ({1} қайталанатын сөз өткізіп жіберілді)', 'Успешно экспортировано {0} карт в Anki ({1} дубликатов пропущено)'],
    'Successfully exported {0} cards to Anki ({1} failed)': ['Anki-ге {0} сөз сәтті экспортталды ({1} сәтсіз болды)', 'Успешно экспортировано {0} карт в Anki ({1} не удалось)'],
    'Failed to export {0} cards to Anki. Check console for details.': ['Anki-ге {0} сөзді экспорттау сәтсіз аяқталды. Толығырақ ақпарат үшін консольді тексеріңіз.', 'Не удалось экспортировать {0} карт в Anki. Проверьте консоль для получения подробной информации.'],
    'Failed to export to Anki: {0}': ['Anki-ге экспорттау сәтсіз аяқталды: {0}', 'Не удалось экспортировать в Anki: {0}'],
    'Failed to connect to Anki. Make sure Anki is running with AnkiConnect plugin installed.': [
        'Anki-ге қосылу сәтсіз аяқталды.\nAnki қосулы және AnkiConnect плагині орнатылғанына көз жеткізіңіз (ID: 2055492159).',
        'Не удалось подключиться к Anki.\nУбедитесь, что Anki запущен с установленным плагином AnkiConnect (ID: 2055492159).'],
    'Failed to connect to Anki. Make sure Anki is running with AnkiConnect plugin (ID: 2055492159) installed.': [
        '1. https://apps.ankiweb.net/ сайтынан Anki-ді орнатыңыз.\n2. Anki-ді ашып, Tools > Add-ons > Get Add-ons... тармағына өтіңіз.\n3. 2055492159 кодын енгізіп, AnkiConnect орнату үшін Ok батырмасын басыңыз.\n4. Орнатуды аяқтау үшін Anki-ді қайта іске қосыңыз.',
        '1. Установите Anki с сайта https://apps.ankiweb.net/.\n2. Откройте Anki, затем перейдите в Tools > Add-ons > Get Add-ons...\n3. Введите код 2055492159 и нажмите Ok для установки AnkiConnect.\n4. Перезапустите Anki для завершения установки.'
    ],
    'No translation': ['Аударма жоқ', 'Нет перевода'],
    'Hotkeys': ['Жылдам перне тіркестері', 'Горячие клавиши'],
    'Open popup': ['Қалқымалы терезені ашу', 'Открыть всплывающее окно'],
    'Open side panel': ['Қосымша тақтаны ашу', 'Открыть боковую панель'],
    'Links': ['Сілтемелер', 'Ссылки'],
    'Demo': ['Нұсқаулық', 'Инструкция'],
    'Mark us': ['Қосымшаны бағaлаңыз', 'Оцените расширение'],
    'Right click': ['Тінтуірдің оң жақ түймешігі', 'Правый клик']
};

const cyrillicToLatinMap = {
    'А': 'A', 'а': 'a',
    'Ә': 'Ä', 'ә': 'ä',
    'Б': 'B', 'б': 'b',
    'В': 'V', 'в': 'v',
    'Г': 'G', 'г': 'g',
    'Ғ': 'Ğ', 'ғ': 'ğ',
    'Д': 'D', 'д': 'd',
    'Е': 'E', 'е': 'e',
    'Ё': 'E', 'ё': 'e',
    'Ж': 'J', 'ж': 'j',
    'З': 'Z', 'з': 'z',
    'И': 'İ', 'и': 'i',
    'Й': 'İ', 'й': 'i',
    'К': 'K', 'к': 'k',
    'Қ': 'Q', 'қ': 'q',
    'Л': 'L', 'л': 'l',
    'М': 'M', 'м': 'm',
    'Н': 'N', 'н': 'n',
    'Ң': 'Ñ', 'ң': 'ñ',
    'О': 'O', 'о': 'o',
    'Ө': 'Ö', 'ө': 'ö',
    'П': 'P', 'п': 'p',
    'Р': 'R', 'р': 'r',
    'С': 'S', 'с': 's',
    'Т': 'T', 'т': 't',
    'У': 'U', 'у': 'u',
    'Ұ': 'Ū', 'ұ': 'ū',
    'Ү': 'Ü', 'ү': 'ü',
    'Ф': 'F', 'ф': 'f',
    'Х': 'H', 'х': 'h',
    'Һ': 'H', 'һ': 'h',
    'Ц': 'Ts', 'ц': 'ts',
    'Ч': 'Ch', 'ч': 'ch',
    'Ш': 'Ş', 'ш': 'ş',
    'Щ': 'Şş', 'щ': 'şş',
    'Ъ': '', 'ъ': '',
    'Ы': 'Y', 'ы': 'y',
    'І': 'I', 'і': 'ı',
    'Ь': '', 'ь': '',
    'Э': 'E', 'э': 'e',
    'Ю': 'İu', 'ю': 'iu',
    'Я': 'İa', 'я': 'ia'
};

export function cyrillicToLatin2021(text) {
    if (!text) return '';
    return text.split('').map(char => {
        const mapped = cyrillicToLatinMap[char];
        return mapped !== undefined ? mapped : char;
    }).join('');
}

export function getText(key, options, translations, args = []) {
    const pair = translations[key];
    if (!pair) return key;

    let text = key;
    switch (options.language) {
        case 'рус':
        case 'rus':
            text = pair[1];
            break;
        case 'қаз':
            text = pair[0];
            break;
        case 'qaz':
            text = cyrillicToLatin2021(pair[0]);
            break;
    }

    // Replace placeholders with arguments if provided
    if (args && args.length > 0) {
        return text.replace(/{(\d+)}/g, (match, index) => {
            const argIndex = parseInt(index, 10);
            return argIndex < args.length ? args[argIndex] : match;
        });
    }

    return text;
}

const AlphabetChecks = {
    қаз: /^[а-яА-ЯёЁӘәҒғІіҢңӨөҰұүҮҚқһ\s-]+$/,
    qaz: /^[a-zA-ZÄäĞğIıİiÑñÖöŞşŪūÜü\s-]+$/,
    рус: /^[а-яА-ЯёЁ\s-]+$/
}

export const languages = [
    {
        key: 'қаз',
        title: 'Қазақша',  
        description: "Қазақ сөзін іздеу",
        prefix: "kk/ru",
        latin: false,
        regex: AlphabetChecks.қаз,
        rule: (value) => !value || AlphabetChecks.қаз.test(value) || "Қате қазақ әріптері табылған!",
    },
    {
        key: 'qaz',
        title: 'Qazaqşa',
        description: "Qazaq sözın ızdeu",
        prefix: "kk-Latn/ru",
        latin: true,
        regex: AlphabetChecks.qaz,
        rule: (value) => !value || AlphabetChecks.qaz.test(value) || "Qate qazaq áripteri tabylǵan!",
    },
    {
        key: 'рус',
        title: 'Русский',
        description: "Поиск слова на русском",
        prefix: "ru/kk",
        latin: false,
        regex: AlphabetChecks.рус,
        rule: (value) => !value || AlphabetChecks.рус.test(value) || "Недопустимые русские кириллические символы!",
    },
    {
        key: 'rus',
        title: 'Русский -> Qazaqşa',
        description: "Поиск слова на русском",
        prefix: "ru/kk-Latn",
        latin: true,
        regex: AlphabetChecks.рус,
        rule: (value) => !value || AlphabetChecks.рус.test(value) || "Недопустимые русские кириллические символы!",
    }
]; 